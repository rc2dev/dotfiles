# Startup commands for dwm
#
# Author: Rafael Cavalcanti <https://rafaelc.org/dev>

xrdb $XRESOURCES

# Make Qt applications to be styled as Gtk
# (needes QGnomePlatform, installed by default on Fedora)
export QT_QPA_PLATFORMTHEME=gnome

lxpolkit &  # Polkit agent, so GUI applications can request privileges
xsettingsd &
remap-kb &
sxhkd &
gen-dunst-theme &  # This already calls dunst
nitrogen --restore &
/usr/libexec/geoclue-2.0/demos/agent &  # Needed for redshift on Fedora WM
redshift-gtk &
picom &
clipmenud &
nm-applet &
blueman-applet &
system-config-printer-applet &
keepassxc &
$TERMINAL -n plan -e notes today &

# Auto-lock screen
# Trigger slock on inactivity, suspension, hibernation, etc.
xss-lock slock &
# Trigger slock after 5 min of inactivity
{ xset s on; xset s 300; } &

# Host specific
case "$HOST" in
  rd)
    # If -f is not passed, mouse over dwmbar has the same behaviour
    # as it was over the focused window.
    imwheel -b "45" -f &
    ;;

  x220)
    bato &
    ;;
esac

# Statusbar loop
while true; do
  dwmbar
  sleep 10s
done &

