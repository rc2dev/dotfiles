# vim:ft=sh
#
# Startup commands for dwm
#
# Author: Rafael Cavalcanti <https://rafaelc.org/dev>
#

# For Flatpak
systemctl --user import-environment DISPLAY XAUTHORITY
if command -v dbus-update-activation-environment >/dev/null 2>&1; then
   dbus-update-activation-environment DISPLAY XAUTHORITY
fi

xrdb "$XRESOURCES"

# Make Qt applications to be styled as Gtk
# (needes QGnomePlatform, installed by default on Fedora)
export QT_QPA_PLATFORMTHEME=gnome

lxpolkit &  # Polkit agent, so GUI applications can request privileges
xsettingsd &
sxhkd &
gen-dunst-theme &  # This already calls dunst
nitrogen --restore &
/usr/libexec/geoclue-2.0/demos/agent &  # Needed for redshift on Fedora WM
redshift-gtk &
picom &
clipmenud &
playerctld daemon &
nm-applet &
blueman-applet &
keepassxc &

# Auto-lock screen
# Trigger slock on inactivity, suspension, hibernation, etc.
xss-lock slock &
# Trigger slock after 5 min of inactivity
{ xset s on; xset s 300; } &

# Statusbar loop
while true; do
  dwmbar
  sleep 10s
done &

