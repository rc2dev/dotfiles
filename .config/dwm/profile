# vim:ft=sh
#
# Startup commands for dwm
#
# Author: Rafael Cavalcanti <https://rafaelc.org/dev>
#

xrdb "$XRESOURCES"

# Make Qt applications to be styled as Gtk
# (needes QGnomePlatform, installed by default on Fedora)
export QT_QPA_PLATFORMTHEME=gnome

# Applications
lxpolkit &  # Polkit agent, so GUI applications can request privileges
xsettingsd &
sxhkd &
gen-dunst-theme &  # This already calls dunst
nitrogen --restore &
# Needed for redshift on WM due to a bug
# (<https://wiki.archlinux.org/title/Redshift#Automatic_location_based_on_GeoClue2>)
/usr/libexec/geoclue-2.0/demos/agent &
redshift-gtk &
picom --experimental-backends &  # --experimental-backends enables vsync on xrender
clipmenud &
playerctld daemon &
nm-applet &
blueman-applet &
keepassxc &

# Auto-lock screen
# Trigger slock on inactivity, suspension, hibernation, etc.
xss-lock slock &
# Trigger slock after 5 min of inactivity
{ xset s on; xset s 300; } &

# Statusbar loop
while true; do
  dwmbar
  sleep 10s
done &

