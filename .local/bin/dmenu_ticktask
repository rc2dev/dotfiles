#!/usr/bin/env bash
#
# dmenu script for running ticktask.
#
# Copyright (C) 2023 Rafael Cavalcanti <https://rafaelc.org/dev>
# Licensed under GPLv3

set -euo pipefail
readonly dmenu="${DMENU:-dmenu}"

readonly task="$($dmenu -l 0 -p "Add to TickTick")"
if [[ -z "$task" ]]; then
  exit 0
fi

if ticktask "$task"; then
  notify-send "TickTask" --icon checkbox "Sent."
else
  notify-send "TickTask" --icon checkbox --urgency critical "Not sent."
fi
