#!/usr/bin/env bash
#
# Dunst wrapper to use Xresources
#
# Copyright (C) 2021 Rafael Cavalcanti <https://rafaelc.org/dev>
# Licensed under GPLv3

set -euo pipefail

readonly dunst_bin="/usr/bin/dunst"
readonly xresources="$(xrdb -query)"

# Arg: value to query
query_xrdb() {
  grep "$1" <<< "$xresources" | cut -f 2
}

# Kill running instance if any
killall dunst 2>/dev/null || true

"$dunst_bin" \
  -frame_color "$(query_xrdb Dunst.frame_color)" \
  -separator_color "$(query_xrdb Dunst.separator_color)" \
  -lb "$(query_xrdb Dunst.lowbg)" \
  -lf "$(query_xrdb Dunst.lowfg)" \
  -nb "$(query_xrdb Dunst.normalbg)" \
  -nf "$(query_xrdb Dunst.normalfg)" \
  -cb "$(query_xrdb Dunst.criticalbg)" \
  -cf "$(query_xrdb Dunst.crtiicalfg)" \
  -font "$(query_xrdb Dunst.font)" \
  -frame_width "$(query_xrdb Dunst.frame_width)" \
  -transparency "$(query_xrdb Dunst.transparency)" \
  -icon_path "$(query_xrdb Dunst.icon_path)"

